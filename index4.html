<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>刘淑容奶奶 · 永恒的思念</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        serene: {
                            white: '#FFFFFF',
                            light: '#F8F9FA',
                            gray: '#E9ECEF',
                            blue: '#4A6FA5',
                            teal: '#5E8C61',
                            brown: '#8B6B4D',
                            peach: '#E8B4B4',
                            dark: '#495057'
                        }
                    },
                    fontFamily: {
                        'serif': ['Noto Serif SC', 'serif'],
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.8s ease-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'slide-down': 'slideDown 0.6s ease-out',
                        'scale-in': 'scaleIn 0.5s ease-out',
                        'float': 'float 4s ease-in-out infinite',
                        'pulse-subtle': 'pulseSubtle 2s ease-in-out infinite'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: 0 },
                            '100%': { opacity: 1 }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: 0 },
                            '100%': { transform: 'translateY(0)', opacity: 1 }
                        },
                        slideDown: {
                            '0%': { transform: 'translateY(-20px)', opacity: 0 },
                            '100%': { transform: 'translateY(0)', opacity: 1 }
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.95)', opacity: 0 },
                            '100%': { transform: 'scale(1)', opacity: 1 }
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-8px)' }
                        },
                        pulseSubtle: {
                            '0%, 100%': { opacity: 1 },
                            '50%': { opacity: 0.8 }
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        :root {
            --primary-color: #4A6FA5;
            --secondary-color: #5E8C61;
            --accent-color: #8B6B4D;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #F8F9FA 0%, #FFFFFF 100%);
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
            color: #495057;
        }
        
        /* 简约卡片样式 */
        .modern-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(0, 0, 0, 0.03);
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        .modern-card:hover {
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        /* 简约轮播容器 */
        .modern-carousel {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            background: #F8F9FA;
        }
        
        .carousel-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 1;
        }
        
        .carousel-slide.active {
            opacity: 1;
            z-index: 2;
        }
        
        /* 文字容器 */
        .text-display {
            height: 100%;
            padding: 2rem;
            overflow-y: auto;
            position: relative;
        }
        
        .text-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 2rem;
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 1;
        }
        
        .text-slide.active {
            opacity: 1;
            z-index: 2;
        }
        
        /* 视频容器 - 默认自动播放 */
        .video-player {
            position: relative;
            width: 100%;
            height: 100%;
            background: #000;
        }
        
        .video-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 1;
        }
        
        .video-slide.active {
            opacity: 1;
            z-index: 2;
        }
        
        .video-slide video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* 简约控制按钮 */
        .simple-control {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.2s ease;
            color: #495057;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .simple-control:hover {
            background: white;
            color: #4A6FA5;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .simple-control.prev {
            left: 16px;
        }
        
        .simple-control.next {
            right: 16px;
        }
        
        /* 简约指示器 */
        .simple-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(73, 80, 87, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .simple-indicator.active {
            width: 24px;
            border-radius: 12px;
            background: #4A6FA5;
        }
        
        /* 加载动画 */
        .loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }
        
        .loading-spinner {
            width: 32px;
            height: 32px;
            border: 3px solid #E9ECEF;
            border-top: 3px solid #4A6FA5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 简约装饰 */
        .minimal-ornament {
            position: fixed;
            z-index: 1;
            pointer-events: none;
            opacity: 0.05;
        }
        
        /* 简洁标题样式 */
        .clean-title {
            position: relative;
            display: inline-block;
            padding-bottom: 8px;
        }
        
        .clean-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40%;
            height: 2px;
            background: linear-gradient(90deg, #4A6FA5, transparent);
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            .modern-card {
                border-radius: 12px;
            }
            
            .simple-control {
                width: 36px;
                height: 36px;
            }
            
            .simple-control.prev {
                left: 12px;
            }
            
            .simple-control.next {
                right: 12px;
            }
        }
        
        /* 滚动条样式 */
        .text-display::-webkit-scrollbar {
            width: 4px;
        }
        
        .text-display::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .text-display::-webkit-scrollbar-thumb {
            background: rgba(73, 80, 87, 0.2);
            border-radius: 2px;
        }
        
        .text-display::-webkit-scrollbar-thumb:hover {
            background: rgba(73, 80, 87, 0.3);
        }
        
        /* 简约分隔线 */
        .clean-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(73, 80, 87, 0.1), transparent);
        }
        
        /* 播放状态指示器 */
        .play-status {
            position: absolute;
            bottom: 16px;
            right: 16px;
            width: 24px;
            height: 24px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;
            pointer-events: none;
        }
        
        .play-status i {
            color: white;
            font-size: 10px;
        }
    </style>
</head>
<body class="bg-serene-light">
    <!-- 简约装饰元素 -->
    <div class="minimal-ornament top-10 left-5 text-4xl text-serene-blue animate-float">
        <i class="fa fa-circle"></i>
    </div>
    <div class="minimal-ornament top-20 right-10 text-3xl text-serene-teal animate-float" style="animation-delay: 1s;">
        <i class="fa fa-circle-thin"></i>
    </div>
    <div class="minimal-ornament bottom-20 left-10 text-2xl text-serene-brown animate-float" style="animation-delay: 2s;">
        <i class="fa fa-circle"></i>
    </div>

    <!-- 头部区域 -->
    <header class="py-12 md:py-16 animate-slide-down">
        <div class="container mx-auto px-4 max-w-6xl">
            <div class="text-center">
                <!-- 主标题 -->
                <h1 class="text-3xl md:text-4xl font-serif font-light text-serene-dark mb-6">
                    刘淑容<span class="font-normal text-serene-blue"> 奶奶</span>
                </h1>
                
                <!-- 副标题 -->
                <div class="inline-block px-4 py-2 bg-serene-white rounded-lg shadow-sm mb-8 animate-fade-in">
                    <p class="text-serene-dark/80">
                        1924 — 2025 · 永恒的思念
                    </p>
                </div>
                
                <!-- 简洁分隔线 -->
                <div class="clean-divider max-w-md mx-auto mb-12"></div>
                
                <!-- 简介 -->
                <div class="max-w-2xl mx-auto animate-fade-in" style="animation-delay: 0.2s;">
                    <p class="text-serene-dark/70 leading-relaxed font-serif">
                        那些温暖的记忆，如同晨曦中的微光，<br>
                        永远照亮我们前行的道路。
                    </p>
                </div>
            </div>
        </div>
    </header>

    <!-- 主要内容 -->
    <main class="pb-16">
        <div class="container mx-auto px-4 max-w-6xl">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 mb-12">
                
                <!-- 时光印记 - 图片 -->
                <div class="lg:col-span-4 animate-slide-up">
                    <div class="modern-card h-full">
                        <!-- 标题区 -->
                        <div class="p-6 pb-4">
                            <h2 class="clean-title text-xl font-serif font-medium text-serene-dark mb-2">
                                时光印记
                            </h2>
                            <p class="text-sm text-serene-dark/50">那些珍贵的瞬间</p>
                        </div>
                        
                        <!-- 轮播容器 -->
                        <div class="modern-carousel h-80 md:h-96 mx-4 mb-4" id="imageCarousel">
                            <div class="loading" id="imageLoader">
                                <div class="loading-spinner"></div>
                                <p class="text-sm text-serene-dark/40 mt-3">加载中...</p>
                            </div>
                            <!-- 图片内容由JS动态生成 -->
                        </div>
                        
                        <!-- 指示器 -->
                        <div class="px-4 pb-4 flex justify-center items-center space-x-2">
                            <!-- 指示器动态生成 -->
                        </div>
                    </div>
                </div>

                <!-- 温情话语 - 文字 -->
                <div class="lg:col-span-4 animate-slide-up" style="animation-delay: 0.1s;">
                    <div class="modern-card h-full">
                        <!-- 标题区 -->
                        <div class="p-6 pb-4">
                            <h2 class="clean-title text-xl font-serif font-medium text-serene-dark mb-2">
                                温情话语
                            </h2>
                            <p class="text-sm text-serene-dark/50">字里行间的温暖</p>
                        </div>
                        
                        <!-- 文字容器 -->
                        <div class="text-display mx-4 mb-4" id="textCarousel">
                            <div class="loading" id="textLoader">
                                <div class="loading-spinner"></div>
                                <p class="text-sm text-serene-dark/40 mt-3">读取中...</p>
                            </div>
                            <!-- 文本内容由JS动态生成 -->
                        </div>
                        
                        <!-- 指示器 -->
                        <div class="px-4 pb-4 flex justify-center items-center space-x-2">
                            <!-- 指示器动态生成 -->
                        </div>
                    </div>
                </div>

                <!-- 岁月回响 - 视频 -->
                <div class="lg:col-span-4 animate-slide-up" style="animation-delay: 0.2s;">
                    <div class="modern-card h-full">
                        <!-- 标题区 -->
                        <div class="p-6 pb-4">
                            <h2 class="clean-title text-xl font-serif font-medium text-serene-dark mb-2">
                                岁月回响
                            </h2>
                            <p class="text-sm text-serene-dark/50">流动的记忆</p>
                        </div>
                        
                        <!-- 视频容器 -->
                        <div class="modern-carousel h-80 md:h-96 mx-4 mb-4" id="videoCarousel">
                            <div class="loading" id="videoLoader">
                                <div class="loading-spinner"></div>
                                <p class="text-sm text-serene-dark/40 mt-3">准备中...</p>
                            </div>
                            <!-- 视频内容由JS动态生成 -->
                        </div>
                        
                        <!-- 指示器 -->
                        <div class="px-4 pb-4 flex justify-center items-center space-x-2">
                            <!-- 指示器动态生成 -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 分隔装饰 -->
            <div class="clean-divider my-12"></div>
            
            <!-- 记忆时间线 -->
            <div class="max-w-4xl mx-auto mb-16 animate-fade-in" style="animation-delay: 0.3s;">
                <div class="text-center mb-8">
                    <h3 class="text-xl font-serif font-medium text-serene-dark mb-2">时光轨迹</h3>
                    <p class="text-serene-dark/50 text-sm">九十一载春秋的温暖印记</p>
                </div>
                
                <div class="grid grid-cols-4 gap-4 text-center">
                    <div class="p-3">
                        <div class="text-2xl font-light text-serene-blue mb-1">1924</div>
                        <div class="text-xs text-serene-dark/50">出生之年</div>
                    </div>
                    <div class="p-3">
                        <div class="text-2xl font-light text-serene-teal mb-1">1940s</div>
                        <div class="text-xs text-serene-dark/50">青春岁月</div>
                    </div>
                    <div class="p-3">
                        <div class="text-2xl font-light text-serene-brown mb-1">1960s</div>
                        <div class="text-xs text-serene-dark/50">家庭时光</div>
                    </div>
                    <div class="p-3">
                        <div class="text-2xl font-light text-serene-blue mb-1">2025</div>
                        <div class="text-xs text-serene-dark/50">永恒纪念</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="py-12 bg-serene-white/80">
        <div class="container mx-auto px-4 max-w-3xl">
            <div class="text-center">
                <!-- 纪念图标 -->
                <div class="w-16 h-16 mx-auto mb-6 rounded-full bg-serene-light flex items-center justify-center animate-pulse-subtle">
                    <div class="w-12 h-12 rounded-full bg-serene-blue/10 flex items-center justify-center">
                        <i class="fa fa-heart text-serene-blue"></i>
                    </div>
                </div>
                
                <!-- 纪念文字 -->
                <h3 class="text-lg font-serif font-medium text-serene-dark mb-4">
                    爱是永恒的陪伴
                </h3>
                
                <div class="max-w-md mx-auto mb-8">
                    <p class="text-serene-dark/70 leading-relaxed">
                        2025年，您91岁的容颜<br>
                        永远铭刻在我们心中<br>
                        时光流转，思念长存
                    </p>
                </div>
                
                <!-- 简约装饰 -->
                <div class="flex justify-center space-x-4 mb-8">
                    <div class="w-10 h-10 rounded-full bg-serene-blue/5 flex items-center justify-center">
                        <i class="fa fa-leaf text-serene-blue/60"></i>
                    </div>
                    <div class="w-10 h-10 rounded-full bg-serene-teal/5 flex items-center justify-center">
                        <i class="fa fa-star text-serene-teal/60"></i>
                    </div>
                    <div class="w-10 h-10 rounded-full bg-serene-brown/5 flex items-center justify-center">
                        <i class="fa fa-heart text-serene-brown/60"></i>
                    </div>
                </div>
                
                <!-- 版权信息 -->
                <div class="pt-6 border-t border-serene-dark/10">
                    <p class="text-sm text-serene-dark/40">
                        永恒的思念 · 献给最爱的奶奶
                    </p>
                    <p class="text-xs text-serene-dark/30 mt-1">
                        愿您在天堂安息
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // 配置文件路径
        const FILES = {
            pictures: [
                'pictures/1.jpg',
                'pictures/2.jpg',
                'pictures/8.jpg',
                'pictures/9.jpg',
                'pictures/3.jpg',
                'pictures/5.jpg',
                'pictures/6.jpg',
                'pictures/7.jpg',
                'pictures/4.jpg',
                'pictures/10.jpg',
                'pictures/11.jpg',
                'pictures/12.jpg',
                'pictures/13.jpg',
                'pictures/14.jpg',
                'pictures/15.jpg',
            ],
            texts: [
                'texts/1.txt',
                'texts/3.txt',
                'texts/5.txt',
                'texts/2.txt',
                'texts/4.txt',
                'texts/6.txt',
            ],
            videos: [
                'videos/1.mp4',
                'videos/2.mp4',
                'videos/3.mp4',
                'videos/4.mp4',
                'videos/5.mp4',
                'videos/6.mp4',
                'videos/7.mp4',
                'videos/8.mp4',
            ]
        };

        // 简约轮播管理器
        class SimpleCarousel {
            constructor(type, containerId, files) {
                this.type = type;
                this.container = document.getElementById(containerId);
                this.indicatorsContainer = this.container?.parentElement?.querySelector('.px-4');
                this.files = files;
                this.items = [];
                this.currentIndex = 0;
                this.interval = null;
                this.autoPlayInterval = this.getAutoPlayInterval();
                this.playingVideos = new Set(); // 跟踪正在播放的视频
            }

            getAutoPlayInterval() {
                switch(this.type) {
                    case 'pictures': return 4000;
                    case 'texts': return 6000;
                    case 'videos': return 10000; // 视频轮播时间稍长
                    default: return 4000;
                }
            }

            async init() {
                try {
                    await this.loadContent();
                    this.render();
                    this.startAutoPlay();
                    this.hideLoader();
                    
                    // 如果是视频轮播，自动播放第一个视频
                    if (this.type === 'videos' && this.items.length > 0) {
                        setTimeout(() => {
                            this.playCurrentVideo();
                        }, 500);
                    }
                } catch (error) {
                    console.error(`${this.type}轮播初始化失败:`, error);
                    this.showError();
                }
            }

            async loadContent() {
                switch(this.type) {
                    case 'pictures':
                        this.items = this.files.map(url => ({
                            type: 'image',
                            url: url,
                            title: `回忆 ${this.files.indexOf(url) + 1}`
                        }));
                        break;
                    case 'texts':
                        this.items = await this.loadTexts();
                        break;
                    case 'videos':
                        this.items = this.files.map(url => ({
                            type: 'video',
                            url: url,
                            title: `记忆 ${this.files.indexOf(url) + 1}`
                        }));
                        break;
                }
            }

            async loadTexts() {
                const textItems = [];
                
                for (const filePath of this.files) {
                    try {
                        const response = await fetch(filePath);
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        
                        const text = await response.text();
                        const lines = text.split('\n').filter(line => line.trim().length > 0);
                        
                        let title = '思念';
                        let content = text;
                        let author = 'candy';
                        
                        if (lines.length > 0) {
                            // 第一行作为标题
                            title = lines[0].trim();
                            
                            // 最后一行如果较短，作为作者
                            if (lines.length > 1) {
                                const lastLine = lines[lines.length - 1].trim();
                                if (lastLine.length < 30) {
                                    author = lastLine;
                                    content = lines.slice(1, -1).join('\n');
                                } else {
                                    content = lines.slice(1).join('\n');
                                }
                            }
                        }
                        
                        textItems.push({
                            type: 'text',
                            title: title,
                            content: content || '这里是对奶奶的思念...',
                            author: author,
                            filePath: filePath
                        });
                        
                    } catch (error) {
                        console.error(`加载文本失败: ${filePath}`, error);
                        textItems.push({
                            type: 'text',
                            title: '思念',
                            content: '虽然无法读取原始文件，但对奶奶的思念永远在心中。她的温暖、她的关怀、她的爱，永远是我们最珍贵的回忆。',
                            author: 'candy',
                            isFallback: true
                        });
                    }
                }
                
                return textItems;
            }

            render() {
                if (!this.container || this.items.length === 0) return;

                // 清空容器
                this.container.innerHTML = '';
                
                // 创建轮播项
                this.items.forEach((item, index) => {
                    const slide = this.createSlide(item, index);
                    this.container.appendChild(slide);
                });

                // 创建控制按钮（如果有多项）
                if (this.items.length > 1) {
                    this.createControls();
                }
                
                // 创建指示器（如果有多项）
                if (this.items.length > 1 && this.indicatorsContainer) {
                    this.createIndicators();
                }

                // 显示第一项
                this.showSlide(0);
            }

            createSlide(item, index) {
                const slide = document.createElement('div');
                slide.className = `carousel-slide ${this.type}-slide`;
                slide.dataset.index = index;

                if (item.type === 'image') {
                    const img = document.createElement('img');
                    img.src = item.url;
                    img.alt = item.title;
                    img.className = 'w-full h-full object-cover';
                    img.loading = 'lazy';
                    
                    // 图片加载失败处理
                    img.onerror = () => {
                        console.warn(`图片加载失败: ${item.url}`);
                        img.src = `https://images.unsplash.com/photo-1511285560929-80b456fea0bc?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80`;
                        img.alt = '备用图片';
                    };
                    
                    slide.appendChild(img);
                } 
                else if (item.type === 'text') {
                    const textWrapper = document.createElement('div');
                    textWrapper.className = 'h-full flex flex-col';
                    
                    // 标题
                    const title = document.createElement('h3');
                    title.className = 'text-lg font-serif font-medium text-serene-dark mb-4';
                    title.textContent = item.title;
                    
                    // 内容
                    const content = document.createElement('div');
                    content.className = 'flex-1 overflow-y-auto text-serene-dark/80 leading-relaxed font-serif';
                    content.innerHTML = item.content.replace(/\n/g, '<br><br>');
                    
                    // 作者
                    const author = document.createElement('div');
                    author.className = 'text-right text-sm text-serene-dark/50 mt-4 pt-3 border-t border-serene-dark/10';
                    author.textContent = `— ${item.author}`;
                    
                    textWrapper.appendChild(title);
                    textWrapper.appendChild(content);
                    textWrapper.appendChild(author);
                    slide.appendChild(textWrapper);
                }
                else if (item.type === 'video') {
                    const videoWrapper = document.createElement('div');
                    videoWrapper.className = 'video-player';
                    
                    const video = document.createElement('video');
                    video.className = 'w-full h-full object-cover';
                    video.muted = true; // 静音，方便自动播放
                    video.loop = true; // 循环播放
                    video.playsInline = true;
                    video.preload = 'auto';
                    
                    // 设置自动播放属性
                    video.autoplay = true;
                    
                    const source = document.createElement('source');
                    source.src = item.url;
                    source.type = 'video/mp4';
                    
                    video.appendChild(source);
                    videoWrapper.appendChild(video);
                    
                    // 添加播放状态指示器
                    const playStatus = document.createElement('div');
                    playStatus.className = 'play-status';
                    playStatus.innerHTML = '<i class="fa fa-play"></i>';
                    videoWrapper.appendChild(playStatus);
                    
                    // 视频播放状态更新
                    video.addEventListener('play', () => {
                        playStatus.innerHTML = '<i class="fa fa-pause"></i>';
                    });
                    
                    video.addEventListener('pause', () => {
                        playStatus.innerHTML = '<i class="fa fa-play"></i>';
                    });
                    
                    // 视频错误处理
                    video.onerror = () => {
                        console.error(`视频加载失败: ${item.url}`);
                        videoWrapper.innerHTML = `
                            <div class="w-full h-full flex items-center justify-center bg-serene-dark text-serene-white">
                                <div class="text-center p-4">
                                    <i class="fa fa-video-camera text-2xl mb-2"></i>
                                    <p class="text-sm">视频无法播放</p>
                                </div>
                            </div>
                        `;
                    };
                    
                    slide.appendChild(videoWrapper);
                }

                return slide;
            }

            createControls() {
                const prevBtn = document.createElement('div');
                prevBtn.className = 'simple-control prev';
                prevBtn.innerHTML = '<i class="fa fa-chevron-left"></i>';
                prevBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.prevSlide();
                });
                
                const nextBtn = document.createElement('div');
                nextBtn.className = 'simple-control next';
                nextBtn.innerHTML = '<i class="fa fa-chevron-right"></i>';
                nextBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.nextSlide();
                });
                
                this.container.appendChild(prevBtn);
                this.container.appendChild(nextBtn);
            }

            createIndicators() {
                if (!this.indicatorsContainer) return;
                
                this.indicatorsContainer.innerHTML = '';
                
                this.items.forEach((_, index) => {
                    const indicator = document.createElement('div');
                    indicator.className = `simple-indicator ${index === 0 ? 'active' : ''}`;
                    indicator.addEventListener('click', () => this.showSlide(index));
                    this.indicatorsContainer.appendChild(indicator);
                });
            }

            showSlide(index) {
                if (this.items.length === 0) return;
                
                const slides = this.container.querySelectorAll(`.carousel-slide`);
                if (!slides[index]) return;
                
                // 隐藏当前幻灯片
                slides.forEach(slide => slide.classList.remove('active'));
                
                // 暂停所有视频（除了要显示的那个）
                if (this.type === 'videos') {
                    slides.forEach((slide, i) => {
                        const video = slide.querySelector('video');
                        if (video && i !== index) {
                            video.pause();
                            this.playingVideos.delete(video);
                        }
                    });
                }
                
                // 显示新幻灯片
                this.currentIndex = index;
                slides[index].classList.add('active');
                
                // 如果是视频，自动播放
                if (this.type === 'videos') {
                    this.playCurrentVideo();
                }
                
                // 更新指示器
                if (this.indicatorsContainer) {
                    const indicators = this.indicatorsContainer.querySelectorAll('.simple-indicator');
                    indicators.forEach((indicator, i) => {
                        indicator.classList.toggle('active', i === index);
                    });
                }
            }

            playCurrentVideo() {
                const slides = this.container.querySelectorAll(`.carousel-slide`);
                const currentSlide = slides[this.currentIndex];
                if (!currentSlide) return;
                
                const video = currentSlide.querySelector('video');
                if (video && !this.playingVideos.has(video)) {
                    video.play().catch(e => {
                        console.log('视频播放失败:', e);
                        // 如果自动播放被阻止，可以显示播放按钮
                        const playStatus = currentSlide.querySelector('.play-status');
                        if (playStatus) {
                            playStatus.style.pointerEvents = 'auto';
                            playStatus.style.cursor = 'pointer';
                            playStatus.addEventListener('click', () => {
                                video.play();
                            });
                        }
                    });
                    this.playingVideos.add(video);
                }
            }

            nextSlide() {
                if (this.items.length === 0) return;
                const nextIndex = (this.currentIndex + 1) % this.items.length;
                this.showSlide(nextIndex);
            }

            prevSlide() {
                if (this.items.length === 0) return;
                const prevIndex = (this.currentIndex - 1 + this.items.length) % this.items.length;
                this.showSlide(prevIndex);
            }

            startAutoPlay() {
                if (this.items.length <= 1) return;
                
                this.stopAutoPlay();
                this.interval = setInterval(() => this.nextSlide(), this.autoPlayInterval);
                
                // 鼠标悬停暂停轮播
                this.container.addEventListener('mouseenter', () => this.stopAutoPlay());
                this.container.addEventListener('mouseleave', () => this.startAutoPlay());
            }

            stopAutoPlay() {
                if (this.interval) {
                    clearInterval(this.interval);
                    this.interval = null;
                }
            }

            hideLoader() {
                const loader = document.getElementById(`${this.type}Loader`);
                if (loader) {
                    loader.style.opacity = '0';
                    setTimeout(() => {
                        loader.style.display = 'none';
                    }, 300);
                }
            }

            showError() {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'absolute inset-0 flex items-center justify-center bg-white z-10';
                errorDiv.innerHTML = `
                    <div class="text-center p-4">
                        <div class="text-3xl text-serene-dark/20 mb-2">⚠️</div>
                        <p class="text-sm text-serene-dark/60">内容加载失败</p>
                    </div>
                `;
                this.container.appendChild(errorDiv);
                
                this.hideLoader();
            }
        }

        // 显示简约提示
        function showSimpleToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-serene-white/90 backdrop-blur-sm rounded-full px-4 py-2 shadow-sm border border-serene-dark/5 z-50 animate-fade-in';
            toast.innerHTML = `
                <div class="flex items-center">
                    <div class="w-2 h-2 rounded-full bg-serene-blue mr-2"></div>
                    <span class="text-sm text-serene-dark/80">${message}</span>
                </div>
            `;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translate(-50%, -10px)';
                setTimeout(() => toast.remove(), 300);
            }, 1500);
        }

        // 主初始化函数
        document.addEventListener('DOMContentLoaded', async () => {
            // 显示加载提示
            showSimpleToast('正在加载回忆...');
            
            try {
                // 创建并初始化三个轮播
                const imageCarousel = new SimpleCarousel('pictures', 'imageCarousel', FILES.pictures);
                const textCarousel = new SimpleCarousel('texts', 'textCarousel', FILES.texts);
                const videoCarousel = new SimpleCarousel('videos', 'videoCarousel', FILES.videos);
                
                // 并行初始化所有轮播
                await Promise.allSettled([
                    imageCarousel.init(),
                    textCarousel.init(),
                    videoCarousel.init()
                ]);
                
                // 显示完成提示
                setTimeout(() => {
                    showSimpleToast('回忆加载完成');
                }, 800);
                
            } catch (error) {
                console.error('网站初始化失败:', error);
                
                // 显示错误提示
                showSimpleToast('部分内容加载失败');
            }
        });
    </script>
</body>
</html>